upstream pocketbase {
    server pocketbase:8080;  # Name of the PocketBase service
}

upstream qrapp {
    server qrapp:3000;        # Name of the qrapp service
}

server {
    listen 80;                # Listen on port 80
    server_name yourdomain.com;  # Replace with your domain

    # Default location pointing to /app on qrapp

    location /pocketbase/ {
        proxy_pass http://pocketbase/;  # Pass requests to PocketBase
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

        location / {
        proxy_pass http://qrapp/;  # Pass requests to /app on qrapp
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
